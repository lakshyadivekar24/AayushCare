{% extends 'records/base.html' %}
{% load i18n %}
{% block content %}
<div class="page-header">
    <h2>{% translate "Edit My Profile" %}</h2>
    <p>{% translate "Update your health and personal information." %}</p>
</div>
<div class="card">
    <div class="card-body">
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="row">
                <h5>{% translate "Personal Details" %}</h5>
                <div class="col-md-6 mb-3"><label class="form-label">{% translate "Full Name" %}:</label><input type="text" name="name" class="form-control" value="{{ patient.name }}"></div>
                <div class="col-md-6 mb-3"><label class="form-label">{% translate "Date of Birth" %}:</label><input type="date" name="date_of_birth" class="form-control" value="{{ patient.date_of_birth|date:'Y-m-d' }}"></div>
                
                <h5 class="mt-3">{% translate "Health Metrics" %}</h5>
                <div class="col-md-4 mb-3"><label class="form-label">{% translate "Blood Group" %}:</label><input type="text" name="blood_group" class="form-control" value="{{ patient.blood_group|default:'' }}"></div>
                <div class="col-md-4 mb-3"><label class="form-label">{% translate "Height (cm)" %}:</label><input type="number" name="height" class="form-control" value="{{ patient.height|default:'' }}"></div>
                <div class="col-md-4 mb-3"><label class="form-label">{% translate "Weight (kg)" %}:</label><input type="number" name="weight" class="form-control" value="{{ patient.weight|default:'' }}"></div>

                <h5 class="mt-3">{% translate "Medical History" %}</h5>
                <div class="col-md-6 mb-3"><label class="form-label">{% translate "Allergies" %}:</label><textarea name="allergies" class="form-control" rows="3">{{ patient.allergies|default:'' }}</textarea></div>
                <div class="col-md-6 mb-3"><label class="form-label">{% translate "Chronic Diseases" %}:</label><textarea name="chronic_diseases" class="form-control" rows="3">{{ patient.chronic_diseases|default:'' }}</textarea></div>
                
                <h5 class="mt-3">{% translate "Profile Picture" %}</h5>
                <div class="col-md-6 mb-3">
                    <label class="form-label">{% translate "Upload New Picture" %}:</label>
                    <input type="file" name="profile_picture" class="form-control" accept="image/*">
                    {% if patient.profile_picture %}
                        <small class="text-muted">{% blocktranslate %}Current: {{ patient.profile_picture.name }}{% endblocktranslate %}</small>
                    {% endif %}
                </div>
            </div>
            <button type="submit" class="btn btn-primary">{% translate "Save Changes" %}</button>
            <a href="{% url 'patient_profile' %}" class="btn btn-secondary">{% translate "Cancel" %}</a>
        </form>
    </div>
</div>
{% endblock %}